# ВШЭ-Банк: Модуль учета финансов

### Основной функционал

1. Работа с доменной моделью:
   - Создание, редактирование и удаление счетов
   - Создание, редактирование и удаление категорий
   - Создание, редактирование и удаление операций (доходов/расходов)

2. Аналитика:
   - Подсчет разницы доходов и расходов за выбранный период
   - Группировка доходов и расходов по категориям
   - Анализ операций по типам

3. Импорт и экспорт данных:
   - Экспорт данных в JSON формат
   - Импорт данных из JSON формата

4. Управление данными:
   - Возможность пересчета баланса при несоответствиях
   - Откат операций

## Отчет о решении

### Общая идея решения

Я разработал консольное приложение для учета финансов "ВШЭ-Банк", позволяющее управлять личными финансами. Вот что оно умеет:

1. **Управление счетами**: создание банковских счетов с названием и начальным балансом.
2. **Категории расходов и доходов**: можно создавать свои категории для группировки операций.
3. **Финансовые операции**: добавление доходов и расходов с привязкой к категориям и счетам.
4. **Аналитика**: просмотр статистики по расходам/доходам за период, группировка по категориям.
5. **Импорт/экспорт**: сохранение и загрузка данных в формате JSON.

Особенность нашего решения - это простота использования через консольный интерфейс и надежная архитектура, построенная с применением современных принципов проектирования.

### Применение принципов SOLID и GRASP

1. **Принцип единственной ответственности (SRP)** - каждый класс отвечает только за свою часть функционала:
   - `BankAccountFacade` - только операции со счетами
   - `CategoryFacade` - только работа с категориями
   - `OperationFacade` - только операции с транзакциями
   - `Command` классы выполняют только конкретные действия (например, `CreateAccountCommand`)

2. **Открытость/закрытость (OCP)** - мы можем добавлять новые функции без изменения существующего кода:
   - Новые типы команд можно добавлять, не меняя существующие
   - Систему импорта/экспорта легко расширить для новых форматов данных

3. **Liskov substition principe (LSP)** - наследники правильно расширяют базовые классы:
   - Все реализации `Command<T>` могут использоваться везде, где ожидается интерфейс
   - Декоратор `TimedCommand` корректно расширяет поведение команд

4. **Разделение интерфейсов (ISP)** - интерфейсы содержат только то, что нужно:
   - `Command<T>` имеет только необходимый метод `execute()`
   - `DataVisitor` имеет только методы для посещения разных типов объектов

5. **Инверсия зависимостей (DIP)** - зависимость от абстракций:
   - Все фасады зависят от интерфейсов, а не конкретных реализаций
   - Используем Spring для внедрения зависимостей

6. **Принцип информационного эксперта (GRASP)** - ответственность тому, у кого есть информация:
   - `DomainFactory` создает объекты моделей, так как знает, как их правильно инициализировать
   - `AnalyticsFacade` отвечает за аналитику, так как имеет доступ к операциям

7. **Низкая связанность (GRASP)** - минимум зависимостей между классами:
   - Фасады общаются через высокоуровневые интерфейсы
   - Компоненты можно тестировать изолированно

8. **Высокая связность (GRASP)** - связанная функциональность вместе:
   - Методы в `OperationFacade` тесно связаны с управлением операциями
   - `ConsoleApplication` объединяет пользовательский интерфейс

### Использованные паттерны GoF

1. **Фасад (Facade)** - упрощает работу с подсистемами:
   - `BankAccountFacade` - скрывает сложность работы со счетами
   - `CategoryFacade` - упрощает управление категориями
   - `OperationFacade` - инкапсулирует логику операций
   - `AnalyticsFacade` - предоставляет простой интерфейс для аналитики
   
   Важность: Упрощает клиентский код, разделяет логику приложения на понятные слои.

2. **Команда (Command)** - инкапсулирует запрос в объект:
   - `Command<T>` - интерфейс для всех команд
   - `CreateAccountCommand` - создает счета
   - `CreateOperationCommand` - создает операции
   
   Важность: Позволяет параметризовать действия, откладывать их выполнение, расширять функциональность через декораторы.

3. **Декоратор (Decorator)** - динамически добавляет поведение объектам:
   - `TimedCommand<T>` - измеряет время выполнения любой команды
   
   Важность: Позволяет добавлять функциональность объектам без изменения их кода.

4. **Посетитель (Visitor)** - добавляет операции к объектам без изменения классов:
   - `DataVisitor` - интерфейс посетителя
   - `JsonDataVisitor` - реализация для экспорта в JSON
   
   Важность: Разделяет алгоритмы от структуры данных, позволяет добавлять новые операции.

5. **Фабрика (Factory)** - создает объекты без указания конкретных классов:
   - `DomainFactory` - создает сущности домена (счета, категории, операции)
   
   Важность: Централизует создание объектов, обеспечивает валидацию при создании.

6. **Шаблонный метод (Template Method)** - определяет скелет алгоритма:
   - `DataImporter` - абстрактный класс с общей логикой импорта
   - `JsonDataImporter` - конкретная реализация для JSON
   
   Важность: Переиспользует общий код, позволяя настраивать определенные шаги.

## Инструкция по запуску

### Требования

- Java 17 или выше
- Maven 3.6 или выше

### Шаги по запуску

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/hse-bank.git
   cd hse-bank
   ```

2. Соберите проект:
   ```bash
   mvn clean install
   ```

3. Запустите приложение:
   ```bash
   mvn spring-boot:run
   ```

### Использование

После запуска приложение будет доступно через консольный интерфейс. Вы можете:
1. Создавать счета
2. Добавлять категории доходов и расходов
3. Создавать операции
4. Просматривать аналитику
5. Экспортировать и импортировать данные

## Тестирование

Для запуска тестов выполните:
```bash
mvn test
```